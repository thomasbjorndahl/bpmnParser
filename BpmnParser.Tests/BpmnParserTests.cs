using Microsoft.VisualStudio.TestTools.UnitTesting;
using bjorndahl.Parsers;
using System;
using System.Text;
using System.Linq;

namespace bjorndahl.Parsers.Tests
{
    [TestClass]
    public class BpmnParserTests
    {
        [TestMethod]
        public void BasicCreateParserTest()
        {
            var result = new BpmnParser("");
            Assert.IsFalse(result.DiagramIsValid);
            Assert.IsNotNull(result.Exception);
            Assert.AreEqual("The input was null or empty. Please load a valid BPMN.io diagram XML", result.Exception.Message);
        }

        [TestMethod]
        public void CreateAndDisposeParserTest()
        {
            BpmnParser parser = null;
            var inputString = "foo";
            using (parser = new BpmnParser(inputString))
            {
                Assert.IsNotNull(parser);
                Assert.AreEqual(inputString, parser.DiagramXml);
            }
            Assert.IsNotNull(parser);
            Assert.IsTrue(string.IsNullOrEmpty(parser.DiagramXml));
            Assert.IsNull(parser.Exception);
        }

        [TestMethod]
        public void ValidDiagramTest()
        {
            var diagram = Diagram1();
            using (var parser = new BpmnParser(diagram))
            {
                Assert.IsTrue(parser.DiagramIsValid, parser.Exception?.Message);
            }

            diagram = Diagram2();
            using (var parser = new BpmnParser(diagram))
            {
                Assert.IsTrue(parser.DiagramIsValid, parser.Exception?.Message);
            }
        }

        [TestMethod]
        public void CheckTaskCountsTest()
        {
            var diagram = Diagram2();
            using (var parser = new BpmnParser(diagram))
            {
                Assert.IsTrue(parser.DiagramIsValid, parser.Exception?.Message);

                Assert.IsNotNull(parser.Tasks);
                Assert.IsTrue(parser.Tasks.Count > 0);

                //Check if the parser have found user tasks
                Assert.IsTrue(parser.Tasks.Where(t => t is BpmnUserTask).Count() > 0, "Did not contain any user task");

                //Check if the parser have found service tasks
                Assert.IsTrue(parser.Tasks.Where(t => t is BpmnServiceTask).Count() > 0, "Did not contain any service task");

                //Check if the parser have found sequence tasks
                Assert.IsTrue(parser.Tasks.Where(t => t is BpmnSequenceFlow).Count() > 0, "Did not contain any sequence task");

                //Check if the parser have found start tasks
                Assert.IsTrue(parser.Tasks.Where(t => t is BpmnStartTask).Count() > 0, "Did not contain any start task");

                Assert.AreEqual("Interface to be created", parser.Tasks.Where(t => t is BpmnStartTask).First().Name);

            }
        }

        [TestMethod]
        public void ExtendedWithChoosesTest()
        {
            var diagram = Diagram3();
            using(var parser = new BpmnParser(diagram))
            {
                var startTask = parser.Organized.First();
                Assert.IsNotNull(startTask);

                Assert.IsTrue(startTask.Children.Count() == 1);

            }
        }

        private string Diagram1()
        {
            var sb = new StringBuilder();
            sb.Append(_xmlStart);
            sb.Append(_definitionsStart);
            sb.Append(Tag("process","id=\"Process_09qvwcp\" isExecutable=\"false\""));
            sb.Append(Tag("startEvent","id=\"StartEvent_02yp8q6\" name=\"Interface to be created\""));
            sb.Append(Tag("outgoing"));
            sb.Append("Flow_0qzg110");
            sb.Append(Tag("outgoing", true));
            sb.Append(Tag("startEvent",true));
            sb.Append(Tag("sequenceFlow","id=\"Flow_0qzg110\" sourceRef=\"StartEvent_02yp8q6\" targetRef=\"Activity_0gv3p7z\" /",false));
            sb.Append(Tag("serviceTask", "id=\"Activity_1ecu4ia\" name=\"Set Categories\""));
            sb.Append(Tag("incoming"));
            sb.Append("Flow_09hvh9l");
            sb.Append(Tag("incoming", true));
            sb.Append(Tag("outgoing"));
            sb.Append("Flow_089tgw2");
            sb.Append(Tag("outgoing", true));
            sb.Append(Tag("serviceTask", true));
            sb.Append(Tag("process",true));
            sb.Append(Tag("definitions", true));
            return sb.ToString();
        }

        private string _xmlStart = "<?xml version=\"1.0\" encoding=\"UTF-8\"?>";
        private string _definitionsStart = "<bpmn:definitions xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:bpmn=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:dc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:di=\"http://www.omg.org/spec/DD/20100524/DI\" id=\"Definitions_075ee1m\" targetNamespace=\"http://bpmn.io/schema/bpmn\" exporter=\"bpmn-js (https://demo.bpmn.io)\" exporterVersion=\"7.4.1\">";
        private string Tag(string input, string attributes, bool endTag = false)
        {
            return "<" + (endTag ? "/" : "") + "bpmn:" + input + " " + attributes + "> ";
        }

        private string Tag(string input, bool endTag = false)
        {
            return Tag(input, "", endTag);
        }

        private string Diagram2()
        {
            #region content
            var content = "<?xml version=[qt]1.0[qt] encoding=[qt]UTF-8[qt]?>" +
                "<bpmn:definitions xmlns:xsi=[qt]http://www.w3.org/2001/XMLSchema-instance[qt] xmlns:bpmn=[qt]http://www.omg.org/spec/BPMN/20100524/MODEL[qt] xmlns:bpmndi=[qt]http://www.omg.org/spec/BPMN/20100524/DI[qt] xmlns:dc=[qt]http://www.omg.org/spec/DD/20100524/DC[qt] xmlns:di=[qt]http://www.omg.org/spec/DD/20100524/DI[qt] id=[qt]Definitions_075ee1m[qt] targetNamespace=[qt]http://bpmn.io/schema/bpmn[qt] exporter=[qt]bpmn-js (https://demo.bpmn.io)[qt] exporterVersion=[qt]7.4.1[qt]> " +
                "  <bpmn:process id=[qt]Process_09qvwcp[qt] isExecutable=[qt]false[qt]>                                                                                                                                                                                                                                                                                                                                                                                                                      " +
                "    <bpmn:startEvent id=[qt]StartEvent_02yp8q6[qt] name=[qt]Interface to be created[qt]>                                                                                                                                                                                                                                                                                                                                                                                                    " +
                "      <bpmn:outgoing>Flow_0hamrua</bpmn:outgoing>                                                                                                                                                                                                                                                                                                                                                                                                                                           " +
                "    </bpmn:startEvent>                                                                                                                                                                                                                                                                                                                                                                                                                                                                      " +
                "    <bpmn:sequenceFlow id=[qt]Flow_0hamrua[qt] sourceRef=[qt]StartEvent_02yp8q6[qt] targetRef=[qt]Activity_1b0mxf4[qt] />                                                                                                                                                                                                                                                                                                                                                                   " +
                "    <bpmn:serviceTask id=[qt]Activity_1b0mxf4[qt] name=[qt]Input is of type IF[qt]>                                                                                                                                                                                                                                                                                                                                                                                                         " +
                "      <bpmn:incoming>Flow_0hamrua</bpmn:incoming>                                                                                                                                                                                                                                                                                                                                                                                                                                           " +
                "      <bpmn:outgoing>Flow_10m3ei7</bpmn:outgoing>                                                                                                                                                                                                                                                                                                                                                                                                                                           " +
                "    </bpmn:serviceTask>                                                                                                                                                                                                                                                                                                                                                                                                                                                                     " +
                "    <bpmn:exclusiveGateway id=[qt]Gateway_0p1xtfw[qt]>                                                                                                                                                                                                                                                                                                                                                                                                                                      " +
                "      <bpmn:incoming>Flow_10m3ei7</bpmn:incoming>                                                                                                                                                                                                                                                                                                                                                                                                                                           " +
                "      <bpmn:outgoing>Flow_1lobpnl</bpmn:outgoing>                                                                                                                                                                                                                                                                                                                                                                                                                                           " +
                "      <bpmn:outgoing>Flow_1lxtu6y</bpmn:outgoing>                                                                                                                                                                                                                                                                                                                                                                                                                                           " +
                "    </bpmn:exclusiveGateway>                                                                                                                                                                                                                                                                                                                                                                                                                                                                " +
                "    <bpmn:sequenceFlow id=[qt]Flow_10m3ei7[qt] sourceRef=[qt]Activity_1b0mxf4[qt] targetRef=[qt]Gateway_0p1xtfw[qt] />                                                                                                                                                                                                                                                                                                                                                                      " +
                "    <bpmn:sequenceFlow id=[qt]Flow_1lobpnl[qt] name=[qt]true[qt] sourceRef=[qt]Gateway_0p1xtfw[qt] targetRef=[qt]Activity_0erd3jt[qt] />                                                                                                                                                                                                                                                                                                                                                    " +
                "    <bpmn:serviceTask id=[qt]Activity_0erd3jt[qt] name=[qt]Create interface[qt]>                                                                                                                                                                                                                                                                                                                                                                                                            " +
                "      <bpmn:incoming>Flow_1lobpnl</bpmn:incoming>                                                                                                                                                                                                                                                                                                                                                                                                                                           " +
                "      <bpmn:outgoing>Flow_1abrk6n</bpmn:outgoing>                                                                                                                                                                                                                                                                                                                                                                                                                                           " +
                "    </bpmn:serviceTask>                                                                                                                                                                                                                                                                                                                                                                                                                                                                     " +
                "    <bpmn:sequenceFlow id=[qt]Flow_1abrk6n[qt] sourceRef=[qt]Activity_0erd3jt[qt] targetRef=[qt]Event_09lfweb[qt] />                                                                                                                                                                                                                                                                                                                                                                        " +
                "    <bpmn:endEvent id=[qt]Event_09lfweb[qt]>                                                                                                                                                                                                                                                                                                                                                                                                                                                " +
                "      <bpmn:incoming>Flow_1abrk6n</bpmn:incoming>                                                                                                                                                                                                                                                                                                                                                                                                                                           " +
                "      <bpmn:terminateEventDefinition id=[qt]TerminateEventDefinition_1iiw4ve[qt] />                                                                                                                                                                                                                                                                                                                                                                                                         " +
                "    </bpmn:endEvent>                                                                                                                                                                                                                                                                                                                                                                                                                                                                        " +
                "    <bpmn:sequenceFlow id=[qt]Flow_1lxtu6y[qt] name=[qt]false[qt] sourceRef=[qt]Gateway_0p1xtfw[qt] targetRef=[qt]Activity_1okhk0t[qt] />                                                                                                                                                                                                                                                                                                                                                   " +
                "    <bpmn:userTask id=[qt]Activity_1okhk0t[qt] name=[qt]Approve type[qt]>                                                                                                                                                                                                                                                                                                                                                                                                                   " +
                "      <bpmn:incoming>Flow_1lxtu6y</bpmn:incoming>                                                                                                                                                                                                                                                                                                                                                                                                                                           " +
                "      <bpmn:outgoing>Flow_1qq12t2</bpmn:outgoing>                                                                                                                                                                                                                                                                                                                                                                                                                                           " +
                "    </bpmn:userTask>                                                                                                                                                                                                                                                                                                                                                                                                                                                                        " +
                "    <bpmn:exclusiveGateway id=[qt]Gateway_0ivlnj8[qt]>                                                                                                                                                                                                                                                                                                                                                                                                                                      " +
                "      <bpmn:incoming>Flow_1qq12t2</bpmn:incoming>                                                                                                                                                                                                                                                                                                                                                                                                                                           " +
                "      <bpmn:outgoing>Flow_0ykryha</bpmn:outgoing>                                                                                                                                                                                                                                                                                                                                                                                                                                           " +
                "      <bpmn:outgoing>Flow_08ej3s0</bpmn:outgoing>                                                                                                                                                                                                                                                                                                                                                                                                                                           " +
                "    </bpmn:exclusiveGateway>                                                                                                                                                                                                                                                                                                                                                                                                                                                                " +
                "    <bpmn:sequenceFlow id=[qt]Flow_1qq12t2[qt] sourceRef=[qt]Activity_1okhk0t[qt] targetRef=[qt]Gateway_0ivlnj8[qt] />                                                                                                                                                                                                                                                                                                                                                                      " +
                "    <bpmn:sequenceFlow id=[qt]Flow_0ykryha[qt] name=[qt]Approved[qt] sourceRef=[qt]Gateway_0ivlnj8[qt] targetRef=[qt]Activity_1b42hqt[qt] />                                                                                                                                                                                                                                                                                                                                                " +
                "    <bpmn:serviceTask id=[qt]Activity_1b42hqt[qt] name=[qt]Create[qt]>                                                                                                                                                                                                                                                                                                                                                                                                                      " +
                "      <bpmn:incoming>Flow_0ykryha</bpmn:incoming>                                                                                                                                                                                                                                                                                                                                                                                                                                           " +
                "      <bpmn:outgoing>Flow_0d3ccl3</bpmn:outgoing>                                                                                                                                                                                                                                                                                                                                                                                                                                           " +
                "    </bpmn:serviceTask>                                                                                                                                                                                                                                                                                                                                                                                                                                                                     " +
                "    <bpmn:sequenceFlow id=[qt]Flow_0d3ccl3[qt] sourceRef=[qt]Activity_1b42hqt[qt] targetRef=[qt]Event_09391d7[qt] />                                                                                                                                                                                                                                                                                                                                                                        " +
                "    <bpmn:endEvent id=[qt]Event_09391d7[qt]>                                                                                                                                                                                                                                                                                                                                                                                                                                                " +
                "      <bpmn:incoming>Flow_0d3ccl3</bpmn:incoming>                                                                                                                                                                                                                                                                                                                                                                                                                                           " +
                "      <bpmn:terminateEventDefinition id=[qt]TerminateEventDefinition_1cwhng8[qt] />                                                                                                                                                                                                                                                                                                                                                                                                         " +
                "    </bpmn:endEvent>                                                                                                                                                                                                                                                                                                                                                                                                                                                                        " +
                "    <bpmn:sequenceFlow id=[qt]Flow_08ej3s0[qt] name=[qt]Rejected[qt] sourceRef=[qt]Gateway_0ivlnj8[qt] targetRef=[qt]Activity_031qc8e[qt] />                                                                                                                                                                                                                                                                                                                                                " +
                "    <bpmn:sendTask id=[qt]Activity_031qc8e[qt] name=[qt]Notify Initiator[qt]>                                                                                                                                                                                                                                                                                                                                                                                                               " +
                "      <bpmn:incoming>Flow_08ej3s0</bpmn:incoming>                                                                                                                                                                                                                                                                                                                                                                                                                                           " +
                "      <bpmn:outgoing>Flow_1c4pap2</bpmn:outgoing>                                                                                                                                                                                                                                                                                                                                                                                                                                           " +
                "    </bpmn:sendTask>                                                                                                                                                                                                                                                                                                                                                                                                                                                                        " +
                "    <bpmn:sequenceFlow id=[qt]Flow_1c4pap2[qt] sourceRef=[qt]Activity_031qc8e[qt] targetRef=[qt]Event_0e5s7ul[qt] />                                                                                                                                                                                                                                                                                                                                                                        " +
                "    <bpmn:endEvent id=[qt]Event_0e5s7ul[qt]>                                                                                                                                                                                                                                                                                                                                                                                                                                                " +
                "      <bpmn:incoming>Flow_1c4pap2</bpmn:incoming>                                                                                                                                                                                                                                                                                                                                                                                                                                           " +
                "      <bpmn:terminateEventDefinition id=[qt]TerminateEventDefinition_0ju9xjs[qt] />                                                                                                                                                                                                                                                                                                                                                                                                         " +
                "    </bpmn:endEvent>                                                                                                                                                                                                                                                                                                                                                                                                                                                                        " +
                "  </bpmn:process>                                                                                                                                                                                                                                                                                                                                                                                                                                                                           " +
                "  <bpmndi:BPMNDiagram id=[qt]BPMNDiagram_1[qt]>                                                                                                                                                                                                                                                                                                                                                                                                                                             " +
                "    <bpmndi:BPMNPlane id=[qt]BPMNPlane_1[qt] bpmnElement=[qt]Process_09qvwcp[qt]>                                                                                                                                                                                                                                                                                                                                                                                                           " +
                "      <bpmndi:BPMNEdge id=[qt]Flow_1c4pap2_di[qt] bpmnElement=[qt]Flow_1c4pap2[qt]>                                                                                                                                                                                                                                                                                                                                                                                                         " +
                "        <di:waypoint x=[qt]740[qt] y=[qt]320[qt] />                                                                                                                                                                                                                                                                                                                                                                                                                                         " +
                "        <di:waypoint x=[qt]782[qt] y=[qt]320[qt] />                                                                                                                                                                                                                                                                                                                                                                                                                                         " +
                "      </bpmndi:BPMNEdge>                                                                                                                                                                                                                                                                                                                                                                                                                                                                    " +
                "      <bpmndi:BPMNEdge id=[qt]Flow_08ej3s0_di[qt] bpmnElement=[qt]Flow_08ej3s0[qt]>                                                                                                                                                                                                                                                                                                                                                                                                         " +
                "        <di:waypoint x=[qt]510[qt] y=[qt]235[qt] />                                                                                                                                                                                                                                                                                                                                                                                                                                         " +
                "        <di:waypoint x=[qt]510[qt] y=[qt]320[qt] />                                                                                                                                                                                                                                                                                                                                                                                                                                         " +
                "        <di:waypoint x=[qt]640[qt] y=[qt]320[qt] />                                                                                                                                                                                                                                                                                                                                                                                                                                         " +
                "        <bpmndi:BPMNLabel>                                                                                                                                                                                                                                                                                                                                                                                                                                                                  " +
                "          <dc:Bounds x=[qt]518[qt] y=[qt]293[qt] width=[qt]43[qt] height=[qt]14[qt] />                                                                                                                                                                                                                                                                                                                                                                                                      " +
                "        </bpmndi:BPMNLabel>                                                                                                                                                                                                                                                                                                                                                                                                                                                                 " +
                "      </bpmndi:BPMNEdge>                                                                                                                                                                                                                                                                                                                                                                                                                                                                    " +
                "      <bpmndi:BPMNEdge id=[qt]Flow_0d3ccl3_di[qt] bpmnElement=[qt]Flow_0d3ccl3[qt]>                                                                                                                                                                                                                                                                                                                                                                                                         " +
                "        <di:waypoint x=[qt]740[qt] y=[qt]210[qt] />                                                                                                                                                                                                                                                                                                                                                                                                                                         " +
                "        <di:waypoint x=[qt]782[qt] y=[qt]210[qt] />                                                                                                                                                                                                                                                                                                                                                                                                                                         " +
                "      </bpmndi:BPMNEdge>                                                                                                                                                                                                                                                                                                                                                                                                                                                                    " +
                "      <bpmndi:BPMNEdge id=[qt]Flow_0ykryha_di[qt] bpmnElement=[qt]Flow_0ykryha[qt]>                                                                                                                                                                                                                                                                                                                                                                                                         " +
                "        <di:waypoint x=[qt]535[qt] y=[qt]210[qt] />                                                                                                                                                                                                                                                                                                                                                                                                                                         " +
                "        <di:waypoint x=[qt]640[qt] y=[qt]210[qt] />                                                                                                                                                                                                                                                                                                                                                                                                                                         " +
                "        <bpmndi:BPMNLabel>                                                                                                                                                                                                                                                                                                                                                                                                                                                                  " +
                "          <dc:Bounds x=[qt]563[qt] y=[qt]192[qt] width=[qt]49[qt] height=[qt]14[qt] />                                                                                                                                                                                                                                                                                                                                                                                                      " +
                "        </bpmndi:BPMNLabel>                                                                                                                                                                                                                                                                                                                                                                                                                                                                 " +
                "      </bpmndi:BPMNEdge>                                                                                                                                                                                                                                                                                                                                                                                                                                                                    " +
                "      <bpmndi:BPMNEdge id=[qt]Flow_1qq12t2_di[qt] bpmnElement=[qt]Flow_1qq12t2[qt]>                                                                                                                                                                                                                                                                                                                                                                                                         " +
                "        <di:waypoint x=[qt]480[qt] y=[qt]210[qt] />                                                                                                                                                                                                                                                                                                                                                                                                                                         " +
                "        <di:waypoint x=[qt]485[qt] y=[qt]210[qt] />                                                                                                                                                                                                                                                                                                                                                                                                                                         " +
                "      </bpmndi:BPMNEdge>                                                                                                                                                                                                                                                                                                                                                                                                                                                                    " +
                "      <bpmndi:BPMNEdge id=[qt]Flow_1lxtu6y_di[qt] bpmnElement=[qt]Flow_1lxtu6y[qt]>                                                                                                                                                                                                                                                                                                                                                                                                         " +
                "        <di:waypoint x=[qt]340[qt] y=[qt]124[qt] />                                                                                                                                                                                                                                                                                                                                                                                                                                         " +
                "        <di:waypoint x=[qt]340[qt] y=[qt]210[qt] />                                                                                                                                                                                                                                                                                                                                                                                                                                         " +
                "        <di:waypoint x=[qt]380[qt] y=[qt]210[qt] />                                                                                                                                                                                                                                                                                                                                                                                                                                         " +
                "        <bpmndi:BPMNLabel>                                                                                                                                                                                                                                                                                                                                                                                                                                                                  " +
                "          <dc:Bounds x=[qt]343[qt] y=[qt]164[qt] width=[qt]25[qt] height=[qt]14[qt] />                                                                                                                                                                                                                                                                                                                                                                                                      " +
                "        </bpmndi:BPMNLabel>                                                                                                                                                                                                                                                                                                                                                                                                                                                                 " +
                "      </bpmndi:BPMNEdge>                                                                                                                                                                                                                                                                                                                                                                                                                                                                    " +
                "      <bpmndi:BPMNEdge id=[qt]Flow_1abrk6n_di[qt] bpmnElement=[qt]Flow_1abrk6n[qt]>                                                                                                                                                                                                                                                                                                                                                                                                         " +
                "        <di:waypoint x=[qt]740[qt] y=[qt]99[qt] />                                                                                                                                                                                                                                                                                                                                                                                                                                          " +
                "        <di:waypoint x=[qt]782[qt] y=[qt]99[qt] />                                                                                                                                                                                                                                                                                                                                                                                                                                          " +
                "      </bpmndi:BPMNEdge>                                                                                                                                                                                                                                                                                                                                                                                                                                                                    " +
                "      <bpmndi:BPMNEdge id=[qt]Flow_1lobpnl_di[qt] bpmnElement=[qt]Flow_1lobpnl[qt]>                                                                                                                                                                                                                                                                                                                                                                                                         " +
                "        <di:waypoint x=[qt]365[qt] y=[qt]99[qt] />                                                                                                                                                                                                                                                                                                                                                                                                                                          " +
                "        <di:waypoint x=[qt]640[qt] y=[qt]99[qt] />                                                                                                                                                                                                                                                                                                                                                                                                                                          " +
                "        <bpmndi:BPMNLabel>                                                                                                                                                                                                                                                                                                                                                                                                                                                                  " +
                "          <dc:Bounds x=[qt]494[qt] y=[qt]81[qt] width=[qt]20[qt] height=[qt]14[qt] />                                                                                                                                                                                                                                                                                                                                                                                                       " +
                "        </bpmndi:BPMNLabel>                                                                                                                                                                                                                                                                                                                                                                                                                                                                 " +
                "      </bpmndi:BPMNEdge>                                                                                                                                                                                                                                                                                                                                                                                                                                                                    " +
                "      <bpmndi:BPMNEdge id=[qt]Flow_10m3ei7_di[qt] bpmnElement=[qt]Flow_10m3ei7[qt]>                                                                                                                                                                                                                                                                                                                                                                                                         " +
                "        <di:waypoint x=[qt]310[qt] y=[qt]99[qt] />                                                                                                                                                                                                                                                                                                                                                                                                                                          " +
                "        <di:waypoint x=[qt]315[qt] y=[qt]99[qt] />                                                                                                                                                                                                                                                                                                                                                                                                                                          " +
                "      </bpmndi:BPMNEdge>                                                                                                                                                                                                                                                                                                                                                                                                                                                                    " +
                "      <bpmndi:BPMNEdge id=[qt]Flow_0hamrua_di[qt] bpmnElement=[qt]Flow_0hamrua[qt]>                                                                                                                                                                                                                                                                                                                                                                                                         " +
                "        <di:waypoint x=[qt]178[qt] y=[qt]99[qt] />                                                                                                                                                                                                                                                                                                                                                                                                                                          " +
                "        <di:waypoint x=[qt]210[qt] y=[qt]99[qt] />                                                                                                                                                                                                                                                                                                                                                                                                                                          " +
                "      </bpmndi:BPMNEdge>                                                                                                                                                                                                                                                                                                                                                                                                                                                                    " +
                "      <bpmndi:BPMNShape id=[qt]_BPMNShape_StartEvent_2[qt] bpmnElement=[qt]StartEvent_02yp8q6[qt]>                                                                                                                                                                                                                                                                                                                                                                                          " +
                "        <dc:Bounds x=[qt]142[qt] y=[qt]81[qt] width=[qt]36[qt] height=[qt]36[qt] />                                                                                                                                                                                                                                                                                                                                                                                                         " +
                "        <bpmndi:BPMNLabel>                                                                                                                                                                                                                                                                                                                                                                                                                                                                  " +
                "          <dc:Bounds x=[qt]125[qt] y=[qt]124[qt] width=[qt]71[qt] height=[qt]27[qt] />                                                                                                                                                                                                                                                                                                                                                                                                      " +
                "        </bpmndi:BPMNLabel>                                                                                                                                                                                                                                                                                                                                                                                                                                                                 " +
                "      </bpmndi:BPMNShape>                                                                                                                                                                                                                                                                                                                                                                                                                                                                   " +
                "      <bpmndi:BPMNShape id=[qt]Activity_11awf6o_di[qt] bpmnElement=[qt]Activity_1b0mxf4[qt]>                                                                                                                                                                                                                                                                                                                                                                                                " +
                "        <dc:Bounds x=[qt]210[qt] y=[qt]59[qt] width=[qt]100[qt] height=[qt]80[qt] />                                                                                                                                                                                                                                                                                                                                                                                                        " +
                "      </bpmndi:BPMNShape>                                                                                                                                                                                                                                                                                                                                                                                                                                                                   " +
                "      <bpmndi:BPMNShape id=[qt]Gateway_0p1xtfw_di[qt] bpmnElement=[qt]Gateway_0p1xtfw[qt] isMarkerVisible=[qt]true[qt]>                                                                                                                                                                                                                                                                                                                                                                     " +
                "        <dc:Bounds x=[qt]315[qt] y=[qt]74[qt] width=[qt]50[qt] height=[qt]50[qt] />                                                                                                                                                                                                                                                                                                                                                                                                         " +
                "      </bpmndi:BPMNShape>                                                                                                                                                                                                                                                                                                                                                                                                                                                                   " +
                "      <bpmndi:BPMNShape id=[qt]Activity_1pqi9uo_di[qt] bpmnElement=[qt]Activity_0erd3jt[qt]>                                                                                                                                                                                                                                                                                                                                                                                                " +
                "        <dc:Bounds x=[qt]640[qt] y=[qt]59[qt] width=[qt]100[qt] height=[qt]80[qt] />                                                                                                                                                                                                                                                                                                                                                                                                        " +
                "      </bpmndi:BPMNShape>                                                                                                                                                                                                                                                                                                                                                                                                                                                                   " +
                "      <bpmndi:BPMNShape id=[qt]Event_03275um_di[qt] bpmnElement=[qt]Event_09lfweb[qt]>                                                                                                                                                                                                                                                                                                                                                                                                      " +
                "        <dc:Bounds x=[qt]782[qt] y=[qt]81[qt] width=[qt]36[qt] height=[qt]36[qt] />                                                                                                                                                                                                                                                                                                                                                                                                         " +
                "      </bpmndi:BPMNShape>                                                                                                                                                                                                                                                                                                                                                                                                                                                                   " +
                "      <bpmndi:BPMNShape id=[qt]Activity_1ajn6yq_di[qt] bpmnElement=[qt]Activity_1okhk0t[qt]>                                                                                                                                                                                                                                                                                                                                                                                                " +
                "        <dc:Bounds x=[qt]380[qt] y=[qt]170[qt] width=[qt]100[qt] height=[qt]80[qt] />                                                                                                                                                                                                                                                                                                                                                                                                       " +
                "      </bpmndi:BPMNShape>                                                                                                                                                                                                                                                                                                                                                                                                                                                                   " +
                "      <bpmndi:BPMNShape id=[qt]Gateway_0ivlnj8_di[qt] bpmnElement=[qt]Gateway_0ivlnj8[qt] isMarkerVisible=[qt]true[qt]>                                                                                                                                                                                                                                                                                                                                                                     " +
                "        <dc:Bounds x=[qt]485[qt] y=[qt]185[qt] width=[qt]50[qt] height=[qt]50[qt] />                                                                                                                                                                                                                                                                                                                                                                                                        " +
                "      </bpmndi:BPMNShape>                                                                                                                                                                                                                                                                                                                                                                                                                                                                   " +
                "      <bpmndi:BPMNShape id=[qt]Activity_1ohnubk_di[qt] bpmnElement=[qt]Activity_1b42hqt[qt]>                                                                                                                                                                                                                                                                                                                                                                                                " +
                "        <dc:Bounds x=[qt]640[qt] y=[qt]170[qt] width=[qt]100[qt] height=[qt]80[qt] />                                                                                                                                                                                                                                                                                                                                                                                                       " +
                "      </bpmndi:BPMNShape>                                                                                                                                                                                                                                                                                                                                                                                                                                                                   " +
                "      <bpmndi:BPMNShape id=[qt]Event_1hxh9fd_di[qt] bpmnElement=[qt]Event_09391d7[qt]>                                                                                                                                                                                                                                                                                                                                                                                                      " +
                "        <dc:Bounds x=[qt]782[qt] y=[qt]192[qt] width=[qt]36[qt] height=[qt]36[qt] />                                                                                                                                                                                                                                                                                                                                                                                                        " +
                "      </bpmndi:BPMNShape>                                                                                                                                                                                                                                                                                                                                                                                                                                                                   " +
                "      <bpmndi:BPMNShape id=[qt]Activity_10mpw2p_di[qt] bpmnElement=[qt]Activity_031qc8e[qt]>                                                                                                                                                                                                                                                                                                                                                                                                " +
                "        <dc:Bounds x=[qt]640[qt] y=[qt]280[qt] width=[qt]100[qt] height=[qt]80[qt] />                                                                                                                                                                                                                                                                                                                                                                                                       " +
                "      </bpmndi:BPMNShape>                                                                                                                                                                                                                                                                                                                                                                                                                                                                   " +
                "      <bpmndi:BPMNShape id=[qt]Event_0oula8w_di[qt] bpmnElement=[qt]Event_0e5s7ul[qt]>                                                                                                                                                                                                                                                                                                                                                                                                      " +
                "        <dc:Bounds x=[qt]782[qt] y=[qt]302[qt] width=[qt]36[qt] height=[qt]36[qt] />                                                                                                                                                                                                                                                                                                                                                                                                        " +
                "      </bpmndi:BPMNShape>                                                                                                                                                                                                                                                                                                                                                                                                                                                                   " +
                "    </bpmndi:BPMNPlane>                                                                                                                                                                                                                                                                                                                                                                                                                                                                     " +
                "  </bpmndi:BPMNDiagram>                                                                                                                                                                                                                                                                                                                                                                                                                                                                     " +
                "</bpmn:definitions>                                                                                                                                                                                                                                                                                                                                                                                                                                                                         ";
            #endregion
            return content.Replace("[qt]", "\"");
        }                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     

        private string Diagram3()
        {
            var str = "";
            #region string
            str = "<?xml version=[qt]1.0[qt] encoding=[qt]UTF-8[qt]?> <bpmn:definitions xmlns:xsi=[qt]http://www.w3.org/2001/XMLSchema-instance[qt] xmlns:bpmn=[qt]http://www.omg.org/spec/BPMN/20100524/MODEL[qt] xmlns:bpmndi=[qt]http://www.omg.org/spec/BPMN/20100524/DI[qt] xmlns:dc=[qt]http://www.omg.org/spec/DD/20100524/DC[qt] xmlns:di=[qt]http://www.omg.org/spec/DD/20100524/DI[qt] id=[qt]Definitions_075ee1m[qt] targetNamespace=[qt]http://bpmn.io/schema/bpmn[qt] exporter=[qt]bpmn-js (https://demo.bpmn.io)[qt] exporterVersion=[qt]7.4.1[qt]>   <bpmn:process id=[qt]Process_09qvwcp[qt] isExecutable=[qt]false[qt]>     <bpmn:startEvent id=[qt]StartEvent_02yp8q6[qt] name=[qt]Interface to be created[qt]>       <bpmn:outgoing>Flow_0hamrua</bpmn:outgoing>     </bpmn:startEvent>     <bpmn:sequenceFlow id=[qt]Flow_0hamrua[qt] sourceRef=[qt]StartEvent_02yp8q6[qt] targetRef=[qt]Activity_1b0mxf4[qt] />     <bpmn:serviceTask id=[qt]Activity_1b0mxf4[qt] name=[qt]Input is of type IF[qt]>       <bpmn:incoming>Flow_0hamrua</bpmn:incoming>       <bpmn:outgoing>Flow_10m3ei7</bpmn:outgoing>     </bpmn:serviceTask>     <bpmn:exclusiveGateway id=[qt]Gateway_0p1xtfw[qt]>       <bpmn:incoming>Flow_10m3ei7</bpmn:incoming>       <bpmn:outgoing>Flow_1lobpnl</bpmn:outgoing>       <bpmn:outgoing>Flow_1lxtu6y</bpmn:outgoing>     </bpmn:exclusiveGateway>     <bpmn:sequenceFlow id=[qt]Flow_10m3ei7[qt] sourceRef=[qt]Activity_1b0mxf4[qt] targetRef=[qt]Gateway_0p1xtfw[qt] />     <bpmn:sequenceFlow id=[qt]Flow_1lobpnl[qt] name=[qt]true[qt] sourceRef=[qt]Gateway_0p1xtfw[qt] targetRef=[qt]Activity_0erd3jt[qt] />     <bpmn:serviceTask id=[qt]Activity_0erd3jt[qt] name=[qt]Create interface[qt]>       <bpmn:incoming>Flow_1lobpnl</bpmn:incoming>       <bpmn:outgoing>Flow_1abrk6n</bpmn:outgoing>     </bpmn:serviceTask>     <bpmn:sequenceFlow id=[qt]Flow_1abrk6n[qt] sourceRef=[qt]Activity_0erd3jt[qt] targetRef=[qt]Event_09lfweb[qt] />     <bpmn:endEvent id=[qt]Event_09lfweb[qt]>       <bpmn:incoming>Flow_1abrk6n</bpmn:incoming>       <bpmn:terminateEventDefinition id=[qt]TerminateEventDefinition_1iiw4ve[qt] />     </bpmn:endEvent>     <bpmn:sequenceFlow id=[qt]Flow_1lxtu6y[qt] name=[qt]false[qt] sourceRef=[qt]Gateway_0p1xtfw[qt] targetRef=[qt]Activity_1okhk0t[qt] />     <bpmn:userTask id=[qt]Activity_1okhk0t[qt] name=[qt]Approve type[qt]>       <bpmn:incoming>Flow_1lxtu6y</bpmn:incoming>       <bpmn:outgoing>Flow_1qq12t2</bpmn:outgoing>     </bpmn:userTask>     <bpmn:exclusiveGateway id=[qt]Gateway_0ivlnj8[qt]>       <bpmn:incoming>Flow_1qq12t2</bpmn:incoming>       <bpmn:outgoing>Flow_0ykryha</bpmn:outgoing>       <bpmn:outgoing>Flow_08ej3s0</bpmn:outgoing>     </bpmn:exclusiveGateway>     <bpmn:sequenceFlow id=[qt]Flow_1qq12t2[qt] sourceRef=[qt]Activity_1okhk0t[qt] targetRef=[qt]Gateway_0ivlnj8[qt] />     <bpmn:sequenceFlow id=[qt]Flow_0ykryha[qt] name=[qt]Approved[qt] sourceRef=[qt]Gateway_0ivlnj8[qt] targetRef=[qt]Activity_1b42hqt[qt] />     <bpmn:serviceTask id=[qt]Activity_1b42hqt[qt] name=[qt]Create[qt]>       <bpmn:incoming>Flow_0ykryha</bpmn:incoming>       <bpmn:outgoing>Flow_0d3ccl3</bpmn:outgoing>     </bpmn:serviceTask>     <bpmn:sequenceFlow id=[qt]Flow_0d3ccl3[qt] sourceRef=[qt]Activity_1b42hqt[qt] targetRef=[qt]Event_09391d7[qt] />     <bpmn:endEvent id=[qt]Event_09391d7[qt]>       <bpmn:incoming>Flow_0d3ccl3</bpmn:incoming>       <bpmn:terminateEventDefinition id=[qt]TerminateEventDefinition_1cwhng8[qt] />     </bpmn:endEvent>     <bpmn:sequenceFlow id=[qt]Flow_08ej3s0[qt] name=[qt]Rejected[qt] sourceRef=[qt]Gateway_0ivlnj8[qt] targetRef=[qt]Activity_031qc8e[qt] />     <bpmn:sendTask id=[qt]Activity_031qc8e[qt] name=[qt]Notify Initiator[qt]>       <bpmn:incoming>Flow_08ej3s0</bpmn:incoming>       <bpmn:outgoing>Flow_1c4pap2</bpmn:outgoing>     </bpmn:sendTask>     <bpmn:sequenceFlow id=[qt]Flow_1c4pap2[qt] sourceRef=[qt]Activity_031qc8e[qt] targetRef=[qt]Event_0e5s7ul[qt] />     <bpmn:endEvent id=[qt]Event_0e5s7ul[qt]>       <bpmn:incoming>Flow_1c4pap2</bpmn:incoming>       <bpmn:terminateEventDefinition id=[qt]TerminateEventDefinition_0ju9xjs[qt] />     </bpmn:endEvent>   </bpmn:process>   <bpmndi:BPMNDiagram id=[qt]BPMNDiagram_1[qt]>     <bpmndi:BPMNPlane id=[qt]BPMNPlane_1[qt] bpmnElement=[qt]Process_09qvwcp[qt]>       <bpmndi:BPMNEdge id=[qt]Flow_1lxtu6y_di[qt] bpmnElement=[qt]Flow_1lxtu6y[qt]>         <di:waypoint x=[qt]340[qt] y=[qt]124[qt] />         <di:waypoint x=[qt]340[qt] y=[qt]210[qt] />         <di:waypoint x=[qt]380[qt] y=[qt]210[qt] />         <bpmndi:BPMNLabel>           <dc:Bounds x=[qt]343[qt] y=[qt]164[qt] width=[qt]25[qt] height=[qt]14[qt] />         </bpmndi:BPMNLabel>       </bpmndi:BPMNEdge>       <bpmndi:BPMNEdge id=[qt]Flow_1abrk6n_di[qt] bpmnElement=[qt]Flow_1abrk6n[qt]>         <di:waypoint x=[qt]740[qt] y=[qt]99[qt] />         <di:waypoint x=[qt]782[qt] y=[qt]99[qt] />       </bpmndi:BPMNEdge>       <bpmndi:BPMNEdge id=[qt]Flow_1lobpnl_di[qt] bpmnElement=[qt]Flow_1lobpnl[qt]>         <di:waypoint x=[qt]365[qt] y=[qt]99[qt] />         <di:waypoint x=[qt]640[qt] y=[qt]99[qt] />         <bpmndi:BPMNLabel>           <dc:Bounds x=[qt]494[qt] y=[qt]81[qt] width=[qt]20[qt] height=[qt]14[qt] />         </bpmndi:BPMNLabel>       </bpmndi:BPMNEdge>       <bpmndi:BPMNEdge id=[qt]Flow_10m3ei7_di[qt] bpmnElement=[qt]Flow_10m3ei7[qt]>         <di:waypoint x=[qt]310[qt] y=[qt]99[qt] />         <di:waypoint x=[qt]315[qt] y=[qt]99[qt] />       </bpmndi:BPMNEdge>       <bpmndi:BPMNEdge id=[qt]Flow_0hamrua_di[qt] bpmnElement=[qt]Flow_0hamrua[qt]>         <di:waypoint x=[qt]178[qt] y=[qt]99[qt] />         <di:waypoint x=[qt]210[qt] y=[qt]99[qt] />       </bpmndi:BPMNEdge>       <bpmndi:BPMNEdge id=[qt]Flow_1qq12t2_di[qt] bpmnElement=[qt]Flow_1qq12t2[qt]>         <di:waypoint x=[qt]480[qt] y=[qt]210[qt] />         <di:waypoint x=[qt]485[qt] y=[qt]210[qt] />       </bpmndi:BPMNEdge>       <bpmndi:BPMNEdge id=[qt]Flow_0ykryha_di[qt] bpmnElement=[qt]Flow_0ykryha[qt]>         <di:waypoint x=[qt]535[qt] y=[qt]210[qt] />         <di:waypoint x=[qt]640[qt] y=[qt]210[qt] />         <bpmndi:BPMNLabel>           <dc:Bounds x=[qt]563[qt] y=[qt]192[qt] width=[qt]49[qt] height=[qt]14[qt] />         </bpmndi:BPMNLabel>       </bpmndi:BPMNEdge>       <bpmndi:BPMNEdge id=[qt]Flow_0d3ccl3_di[qt] bpmnElement=[qt]Flow_0d3ccl3[qt]>         <di:waypoint x=[qt]740[qt] y=[qt]210[qt] />         <di:waypoint x=[qt]782[qt] y=[qt]210[qt] />       </bpmndi:BPMNEdge>       <bpmndi:BPMNEdge id=[qt]Flow_08ej3s0_di[qt] bpmnElement=[qt]Flow_08ej3s0[qt]>         <di:waypoint x=[qt]510[qt] y=[qt]235[qt] />         <di:waypoint x=[qt]510[qt] y=[qt]320[qt] />         <di:waypoint x=[qt]640[qt] y=[qt]320[qt] />         <bpmndi:BPMNLabel>           <dc:Bounds x=[qt]518[qt] y=[qt]293[qt] width=[qt]43[qt] height=[qt]14[qt] />         </bpmndi:BPMNLabel>       </bpmndi:BPMNEdge>       <bpmndi:BPMNEdge id=[qt]Flow_1c4pap2_di[qt] bpmnElement=[qt]Flow_1c4pap2[qt]>         <di:waypoint x=[qt]740[qt] y=[qt]320[qt] />         <di:waypoint x=[qt]782[qt] y=[qt]320[qt] />       </bpmndi:BPMNEdge>       <bpmndi:BPMNShape id=[qt]_BPMNShape_StartEvent_2[qt] bpmnElement=[qt]StartEvent_02yp8q6[qt]>         <dc:Bounds x=[qt]142[qt] y=[qt]81[qt] width=[qt]36[qt] height=[qt]36[qt] />         <bpmndi:BPMNLabel>           <dc:Bounds x=[qt]125[qt] y=[qt]124[qt] width=[qt]71[qt] height=[qt]27[qt] />         </bpmndi:BPMNLabel>       </bpmndi:BPMNShape>       <bpmndi:BPMNShape id=[qt]Activity_11awf6o_di[qt] bpmnElement=[qt]Activity_1b0mxf4[qt]>         <dc:Bounds x=[qt]210[qt] y=[qt]59[qt] width=[qt]100[qt] height=[qt]80[qt] />       </bpmndi:BPMNShape>       <bpmndi:BPMNShape id=[qt]Activity_1ohnubk_di[qt] bpmnElement=[qt]Activity_1b42hqt[qt]>         <dc:Bounds x=[qt]640[qt] y=[qt]170[qt] width=[qt]100[qt] height=[qt]80[qt] />       </bpmndi:BPMNShape>       <bpmndi:BPMNShape id=[qt]Event_1hxh9fd_di[qt] bpmnElement=[qt]Event_09391d7[qt]>         <dc:Bounds x=[qt]782[qt] y=[qt]192[qt] width=[qt]36[qt] height=[qt]36[qt] />       </bpmndi:BPMNShape>       <bpmndi:BPMNShape id=[qt]Gateway_0p1xtfw_di[qt] bpmnElement=[qt]Gateway_0p1xtfw[qt] isMarkerVisible=[qt]true[qt]>         <dc:Bounds x=[qt]315[qt] y=[qt]74[qt] width=[qt]50[qt] height=[qt]50[qt] />       </bpmndi:BPMNShape>       <bpmndi:BPMNShape id=[qt]Activity_1ajn6yq_di[qt] bpmnElement=[qt]Activity_1okhk0t[qt]>         <dc:Bounds x=[qt]380[qt] y=[qt]170[qt] width=[qt]100[qt] height=[qt]80[qt] />       </bpmndi:BPMNShape>       <bpmndi:BPMNShape id=[qt]Gateway_0ivlnj8_di[qt] bpmnElement=[qt]Gateway_0ivlnj8[qt] isMarkerVisible=[qt]true[qt]>         <dc:Bounds x=[qt]485[qt] y=[qt]185[qt] width=[qt]50[qt] height=[qt]50[qt] />       </bpmndi:BPMNShape>       <bpmndi:BPMNShape id=[qt]Activity_10mpw2p_di[qt] bpmnElement=[qt]Activity_031qc8e[qt]>         <dc:Bounds x=[qt]640[qt] y=[qt]280[qt] width=[qt]100[qt] height=[qt]80[qt] />       </bpmndi:BPMNShape>       <bpmndi:BPMNShape id=[qt]Activity_1pqi9uo_di[qt] bpmnElement=[qt]Activity_0erd3jt[qt]>         <dc:Bounds x=[qt]640[qt] y=[qt]59[qt] width=[qt]100[qt] height=[qt]80[qt] />       </bpmndi:BPMNShape>       <bpmndi:BPMNShape id=[qt]Event_0oula8w_di[qt] bpmnElement=[qt]Event_0e5s7ul[qt]>         <dc:Bounds x=[qt]782[qt] y=[qt]302[qt] width=[qt]36[qt] height=[qt]36[qt] />       </bpmndi:BPMNShape>       <bpmndi:BPMNShape id=[qt]Event_03275um_di[qt] bpmnElement=[qt]Event_09lfweb[qt]>         <dc:Bounds x=[qt]782[qt] y=[qt]81[qt] width=[qt]36[qt] height=[qt]36[qt] />       </bpmndi:BPMNShape>     </bpmndi:BPMNPlane>   </bpmndi:BPMNDiagram> </bpmn:definitions> ";
            #endregion
            return str.Replace("[qt]", "\"");
        }
    }                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
}
